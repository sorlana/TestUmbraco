@using Umbraco.Cms.Web.Common.PublishedModels;
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@model IPublishedContent

@{
    var blockGridPage = Model as ContentModels.BlockGrid;
    bool isHomePage = Model.Level == 1 || Model.Name.Equals("Home", StringComparison.OrdinalIgnoreCase);
    string pageTitle = Model.Name; 
    
    if (blockGridPage != null)
    {
        if (isHomePage && blockGridPage.HasProperty("titleHomePage") && blockGridPage.HasValue("titleHomePage"))
        {
            var homeTitle = blockGridPage.Value<string>("titleHomePage");
            if (!string.IsNullOrWhiteSpace(homeTitle))
            {
                pageTitle = homeTitle;
            }
        }
        else if (!isHomePage)
        {
            string[] possibleTitleProperties = { "pageTitle", "title", "metaTitle", "seoTitle", "titleHomePage" };
            
            foreach (var propName in possibleTitleProperties)
            {
                if (blockGridPage.HasProperty(propName) && blockGridPage.HasValue(propName))
                {
                    var value = blockGridPage.Value<string>(propName);
                    if (!string.IsNullOrWhiteSpace(value))
                    {
                        pageTitle = value;
                        break;
                    }
                }
            }
        }
    }

    string siteTitle = "Мой сайт";
    
    var siteSettings = Model.Root()?.ChildrenOfType("siteSettings")?.FirstOrDefault();
    if (siteSettings != null)
    {
        if (siteSettings.HasProperty("siteName") && siteSettings.HasValue("siteName"))
        {
            var siteName = siteSettings.Value<string>("siteName");
            if (!string.IsNullOrWhiteSpace(siteName))
            {
                siteTitle = siteName;
            }
        }
    }
    
    string fullTitle;
    
    if (isHomePage)
    {
        fullTitle = pageTitle;
    }
    else
    {
        fullTitle = $"{pageTitle} - {siteTitle}";
    }
}

<title>@fullTitle</title>