@using Umbraco.Cms.Core.Models.Blocks
@using TestUmbraco.Models
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<BlockGridItem>

@{
    var content = Model.Content;
    var settings = Model.Settings;
    
    // Получаем значение свойства "Class"
    var customClass = content.Value<string>("Class");
    
    // Получаем изображение (предполагается, что свойство Img - это Media Picker)
    var image = content.Value<IPublishedContent>("Img");
    
    var quoteContent = content.Value<string>("content");
}

@if (!string.IsNullOrWhiteSpace(quoteContent))
{
    // Создаем функцию для контента
    Func<object, Microsoft.AspNetCore.Html.IHtmlContent>? contentFunc = 
        @<text>
            @if (image != null)
            {
                <img src="@image.Url()" alt="Quote icon" class="quote-icon" />
            }
            @Html.Raw(quoteContent)
        </text>;

    // Создаем модель для BackgroundClasses
    var backgroundModel = new BackgroundClassesModel
    {
        Settings = settings,
        ComponentId = content.Key,
        Prefix = "quote-bg",
        BaseClass = customClass ?? "",
        AdditionalClasses = "",
        Tag = "blockquote",
        ContainerClass = "",
        Content = contentFunc
    };

    // Рендерим через универсальный компонент
    <partial name="_BackgroundClasses" model="backgroundModel" />
}